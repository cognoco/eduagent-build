# Flow 3: Home Screen Navigation & Curriculum Review
# Validates: authenticated home screen elements, tab navigation,
# tapping a subject navigates to curriculum review.
# Tags: smoke, onboarding
#
# Prerequisites:
#   - User is signed in
#   - At least one subject exists with a generated curriculum
#   - API is running and reachable
appId: com.zwizzly.eduagent
tags:
  - smoke
  - onboarding
---
- launchApp

# Assert home screen renders with key elements
- extendedWaitUntil:
    visible:
      text: "Ready to learn"
    timeout: 15000
- assertVisible: "Your coach has a plan"
- assertVisible: "Your subjects"

# Verify the coaching card area is present (testID: coaching-card)
- assertVisible:
    id: "coaching-card"
    optional: true

# Verify the home scroll view is present
- assertVisible:
    id: "home-scroll-view"

# Verify bottom tab bar is visible with expected tabs
- assertVisible: "Home"
- assertVisible: "Learning Book"
- assertVisible: "More"

# Navigate to Learning Book tab
- tapOn: "Learning Book"

# The Learning Book should show filter tabs and topic list
- assertVisible:
    id: "subject-filter-tabs"
    optional: true

- takeScreenshot: home-navigation

# Navigate back to Home tab
- tapOn: "Home"

# If subjects exist, tap the first subject to view its curriculum
# This uses text matching since subject names are dynamic.
# The curriculum review screen shows "Your Curriculum" or loading state.
- extendedWaitUntil:
    visible:
      text: "Your subjects"
    timeout: 5000

- takeScreenshot: home-subjects-visible
